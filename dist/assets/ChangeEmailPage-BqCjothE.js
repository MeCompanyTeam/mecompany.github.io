import{a as w,u as y,r as a,j as e,L as N,s as b}from"./index-Do9N5Bdr.js";/* empty css                 */const S=()=>{const{user:r}=w(),x=y(),[n,o]=a.useState(""),[l,c]=a.useState(""),[i,m]=a.useState(""),[u,d]=a.useState(!1),[h,t]=a.useState(""),[g,p]=a.useState(""),j=async s=>{if(s.preventDefault(),t(""),p(""),n!==l){t("New emails do not match.");return}if(n===r.email){t("The new email must be different from the current one.");return}if(!i){t("You must enter your current password to make this change.");return}d(!0);const{data:E,error:f}=await b.auth.updateUser({email:n,password:i});f?t(f.message):(p("A confirmation link has been sent to your new email address. Please click the link to complete the change. Another notification has been sent to your old address."),o(""),c(""),m("")),d(!1)};return e.jsxs("div",{children:[e.jsx(N,{to:"/account/settings/security",className:"btn-secondary",style:{marginBottom:"2rem",display:"inline-block"},children:"â† Back to Security"}),e.jsx("h1",{children:"Change Email"}),e.jsxs("p",{children:["Your current email is: ",e.jsx("strong",{children:r==null?void 0:r.email})]}),e.jsx("div",{className:"auth-form-container",style:{margin:"2rem 0"},children:e.jsxs("form",{className:"auth-form",onSubmit:j,children:[h&&e.jsx("p",{className:"error-message",children:h}),g&&e.jsx("p",{className:"success-message",children:g}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"newEmail",children:"New Email"}),e.jsx("input",{id:"newEmail",type:"email",value:n,onChange:s=>o(s.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmNewEmail",children:"Confirm New Email"}),e.jsx("input",{id:"confirmNewEmail",type:"email",value:l,onChange:s=>c(s.target.value),required:!0})]}),e.jsx("hr",{}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"currentPassword",children:"Current Password (for confirmation)"}),e.jsx("input",{id:"currentPassword",type:"password",value:i,onChange:s=>m(s.target.value),required:!0})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[e.jsx("button",{type:"submit",className:"btn",disabled:u,children:u?"Sending...":"Request Email Change"}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>x("/account/settings/security"),children:"Cancel"})]})]})})]})};export{S as default};
