var ue=Object.defineProperty;var me=(n,s,t)=>s in n?ue(n,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[s]=t;var A=(n,s,t)=>me(n,typeof s!="symbol"?s+"":s,t);import{c as D,r as c,j as e,R as U,b as he,L as pe,a as xe,s as k}from"./index-Do9N5Bdr.js";import{u as L}from"./useQuery-Bmia-r3M.js";import{M as I}from"./Modal-C0JTwID5.js";import{p as N}from"./index-KxUSDxB7.js";/* empty css                    */import{E as V}from"./eye-Cn1LezQ_.js";import{C as z,a as je}from"./copy-Bprm7ZNx.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],P=D("download",ge);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fe=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],ye=D("ellipsis-vertical",fe);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],be=D("send",ve);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Q=D("square-pen",Ne);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Ce=D("user-plus",_e),Se=({actions:n})=>{const[s,t]=c.useState(!1),a=c.useRef(null);c.useEffect(()=>{const r=l=>{a.current&&!a.current.contains(l.target)&&t(!1)};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[]);const o=r=>{r.onClick(),t(!1)};return e.jsxs("div",{className:"dropdown-container",ref:a,children:[e.jsx("button",{className:"dropdown-toggle",onClick:()=>t(!s),children:e.jsx(ye,{size:20})}),s&&e.jsx("div",{className:"dropdown-menu",children:n.map((r,l)=>e.jsxs("button",{className:`dropdown-item ${r.className||""}`,onClick:()=>o(r),disabled:r.disabled,children:[r.icon,e.jsx("span",{children:r.label})]},l))})]})},ke=()=>/^((?!chrome|android).)*safari/i.test(navigator.userAgent),G=n=>Array.isArray(n)&&n.every(s=>typeof s=="object"&&!(s instanceof Array)),Ie=n=>Array.isArray(n)&&n.every(s=>Array.isArray(s)),we=n=>Array.from(n.map(s=>Object.keys(s)).reduce((s,t)=>new Set([...s,...t]),[])),Ee=(n,s)=>{s=s||we(n);let t=s,a=s;G(s)&&(t=s.map(r=>r.label),a=s.map(r=>r.key));const o=n.map(r=>a.map(l=>Fe(l,r)));return[t,...o]},Fe=(n,s)=>{const t=n.replace(/\[([^\]]+)]/g,".$1").split(".").reduce(function(a,o,r,l){const d=a[o];if(d==null)l.splice(1);else return d},s);return t===void 0?n in s?s[n]:"":t},Ae=n=>typeof n>"u"||n===null?"":n,W=(n,s=",",t='"')=>n.filter(a=>a).map(a=>a.map(o=>Ae(o)).map(o=>`${t}${o}${t}`).join(s)).join(`
`),Le=(n,s,t,a)=>W(s?[s,...n]:n,t,a),De=(n,s,t,a)=>W(Ee(n,s),t,a),Me=(n,s,t,a)=>s?`${s.join(t)}
${n}`:n.replace(/"/g,'""'),X=(n,s,t,a)=>{if(G(n))return De(n,s,t,a);if(Ie(n))return Le(n,s,t,a);if(typeof n=="string")return Me(n,s,t);throw new TypeError('Data should be a "String", "Array of arrays" OR "Array of objects" ')},Y=(n,s,t,a,o)=>{const r=X(n,t,a,o),l=ke()?"application/csv":"text/csv",d=new Blob([s?"\uFEFF":"",r],{type:l}),p=`data:${l};charset=utf-8,${s?"\uFEFF":""}${r}`,j=window.URL||window.webkitURL;return typeof j.createObjectURL>"u"?p:j.createObjectURL(d)},Z={data:N.oneOfType([N.string,N.array,N.func]).isRequired,headers:N.array,target:N.string,separator:N.string,filename:N.string,uFEFF:N.bool,onClick:N.func,asyncOnClick:N.bool,enclosingCharacter:N.string},ee={separator:",",filename:"generatedBy_react-csv.csv",uFEFF:!0,asyncOnClick:!1,enclosingCharacter:'"'},Oe={target:"_blank"};class H extends U.Component{constructor(s){super(s),this.state={}}buildURI(){return Y(...arguments)}componentDidMount(){const{data:s,headers:t,separator:a,enclosingCharacter:o,uFEFF:r,target:l,specs:d,replace:p}=this.props;this.state.page=window.open(this.buildURI(s,r,t,a,o),l,d,p)}getWindow(){return this.state.page}render(){return null}}A(H,"defaultProps",Object.assign(ee,Oe)),A(H,"propTypes",Z);var R;let Te=(R=class extends U.Component{constructor(s){super(s),this.buildURI=this.buildURI.bind(this)}buildURI(){return Y(...arguments)}handleLegacy(s,t=!1){if(window.navigator.msSaveOrOpenBlob){s.preventDefault();const{data:a,headers:o,separator:r,filename:l,enclosingCharacter:d,uFEFF:p}=this.props,j=t&&typeof a=="function"?a():a;let x=new Blob([p?"\uFEFF":"",X(j,o,r,d)]);return window.navigator.msSaveBlob(x,l),!1}}handleAsyncClick(s){const t=a=>{if(a===!1){s.preventDefault();return}this.handleLegacy(s,!0)};this.props.onClick(s,t)}handleSyncClick(s){if(this.props.onClick(s)===!1){s.preventDefault();return}this.handleLegacy(s)}handleClick(){return s=>{if(typeof this.props.onClick=="function")return this.props.asyncOnClick?this.handleAsyncClick(s):this.handleSyncClick(s);this.handleLegacy(s)}}render(){const{data:s,headers:t,separator:a,filename:o,uFEFF:r,children:l,onClick:d,asyncOnClick:p,enclosingCharacter:j,...x}=this.props,f=typeof window>"u"?"":this.buildURI(s,r,t,a,j);return e.jsx("a",{download:o,...x,ref:v=>this.link=v,target:"_self",href:f,onClick:this.handleClick(),children:l})}},A(R,"defaultProps",ee),A(R,"propTypes",Z),R);const qe=Te,$e=async()=>{const{data:n,error:s}=await k.from("profiles").select("id, first_name, last_name, email, created_at, institution:institutions (id, name), student_limits ( max_students ), teacher_students!teacher_id ( count )").eq("role","teacher");if(s)throw new Error(s.message);return n},Re=async()=>{const{data:n,error:s}=await k.from("teacher_codes").select("id, code, email, created_at, institution:institutions (name), max_students, first_name, last_name").eq("is_used",!1).eq("is_active",!0).order("created_at",{ascending:!1});if(s)throw new Error(s.message);return n},Ue=async()=>{const{data:n,error:s}=await k.from("teacher_codes").select("id, code, email, claimed_at, claimed_by ( first_name, last_name )").eq("is_used",!0).order("claimed_at",{ascending:!1});if(s)throw new Error(s.message);return n},se=async()=>{const{data:n,error:s}=await k.from("institutions").select("id, name");if(s)throw new Error(s.message);return n},ze=({isOpen:n,onClose:s,onInviteSent:t})=>{const{user:a}=xe(),[o,r]=c.useState(""),[l,d]=c.useState(""),[p,j]=c.useState(""),[x,_]=c.useState(""),[f,v]=c.useState(30),[C,h]=c.useState(!1),[b,m]=c.useState(""),[u,y]=c.useState(null),{data:w,isLoading:M,error:O}=L({queryKey:["all_institutions_simple"],queryFn:se,enabled:n}),T=async g=>{g.preventDefault(),h(!0),m(""),y(null);const{data:q,error:E}=await k.rpc("create_teacher_invite",{p_institution_id:o,p_invitee_email:l,p_creator_id:a.id,p_max_students:f,p_first_name:p,p_last_name:x});E?m(E.message):(y(q[0].new_code),t()),h(!1)},S=()=>{d(""),j(""),_(""),r(""),v(30),y(null),m(""),s()};return e.jsx(I,{isOpen:n,onClose:S,title:u?"Invite Sent!":"Invite New Teacher",children:u?e.jsxs("div",{children:[e.jsxs("p",{children:["An invitation code has been generated for ",e.jsxs("strong",{children:[p," ",x," (",l,")"]}),". Please send them the following code:"]}),e.jsxs("div",{className:"generated-code-container",children:[e.jsx("span",{className:"generated-code",children:u}),e.jsxs("button",{className:"btn-secondary",onClick:()=>navigator.clipboard.writeText(u),children:[e.jsx(z,{size:16})," Copy"]})]}),e.jsx("p",{children:"They can use this code to register at the Teacher Registration page."}),e.jsx("button",{className:"btn",onClick:S,style:{marginTop:"1rem"},children:"Done"})]}):e.jsxs("form",{className:"auth-form",onSubmit:T,style:{padding:0},children:[b&&e.jsx("p",{className:"error-message",children:b}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"invitee-email",children:"Teacher's Email Address"}),e.jsx("input",{id:"invitee-email",type:"email",value:l,onChange:g=>d(g.target.value),placeholder:"teacher@example.com",required:!0})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"first-name",children:"First Name"}),e.jsx("input",{id:"first-name",type:"text",value:p,onChange:g=>j(g.target.value),placeholder:"John",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"last-name",children:"Last Name"}),e.jsx("input",{id:"last-name",type:"text",value:x,onChange:g=>_(g.target.value),placeholder:"Doe",required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"institution-select",children:"Assign to Institution"}),M&&e.jsx("p",{children:"Loading institutions..."}),O&&e.jsx("p",{className:"error-message",children:O.message}),w&&e.jsxs("select",{id:"institution-select",value:o,onChange:g=>r(g.target.value),required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"-- Choose an institution --"}),w.map(g=>e.jsx("option",{value:g.id,children:g.name},g.id))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"max-students",children:"Max Students for this Teacher"}),e.jsx("input",{id:"max-students",type:"number",min:"1",value:isNaN(f)?"":f,onChange:g=>v(parseInt(g.target.value,10)),required:!0})]}),e.jsxs("button",{type:"submit",className:"btn",disabled:C,style:{marginTop:"1rem"},children:[e.jsx(be,{size:16,style:{marginRight:"0.5rem"}}),C?"Generating Invite...":"Generate Invite Code"]})]})})},Pe=({isOpen:n,onClose:s,onInviteUpdated:t,invite:a})=>{const[o,r]=c.useState(""),[l,d]=c.useState(""),[p,j]=c.useState(""),[x,_]=c.useState(30),[f,v]=c.useState(!1),[C,h]=c.useState("");U.useEffect(()=>{a&&(r(a.first_name||""),d(a.last_name||""),j(a.email||""),_(a.max_students||30))},[a]);const b=async m=>{m.preventDefault(),v(!0),h("");const{error:u}=await k.rpc("update_teacher_invite",{p_code_id:a.id,p_first_name:o,p_last_name:l,p_email:p,p_max_students:x});u?h(u.message):(t(),s()),v(!1)};return e.jsx(I,{isOpen:n,onClose:s,title:`Edit Invitation for ${a==null?void 0:a.first_name}`,children:e.jsxs("form",{className:"auth-form",onSubmit:b,style:{padding:0},children:[C&&e.jsx("p",{className:"error-message",children:C}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"edit-email",children:"Email Address"}),e.jsx("input",{id:"edit-email",type:"email",value:p,onChange:m=>j(m.target.value),required:!0})]}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"edit-first-name",children:"First Name"}),e.jsx("input",{id:"edit-first-name",type:"text",value:o,onChange:m=>r(m.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"edit-last-name",children:"Last Name"}),e.jsx("input",{id:"edit-last-name",type:"text",value:l,onChange:m=>d(m.target.value),required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"edit-max-students",children:"Max Students"}),e.jsx("input",{id:"edit-max-students",type:"number",min:"1",value:isNaN(x)?"":x,onChange:m=>_(parseInt(m.target.value,10)),required:!0})]}),e.jsx("button",{type:"submit",className:"btn",disabled:f,style:{marginTop:"1rem"},children:f?"Saving...":"Save Changes"})]})})},Je=({isOpen:n,onClose:s,teacher:t,onEditClick:a})=>{if(!t)return null;const o=()=>{navigator.clipboard.writeText(JSON.stringify(t,null,2))},r=()=>{const l="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),d=document.createElement("a");d.setAttribute("href",l),d.setAttribute("download",`teacher_${t.id}.txt`),document.body.appendChild(d),d.click(),d.remove()};return e.jsx(I,{isOpen:n,onClose:s,title:`Details: ${t.first_name} ${t.last_name}`,children:e.jsxs("div",{className:"details-modal-content",children:[e.jsxs("div",{className:"modal-actions-header",children:[e.jsxs("button",{className:"btn",onClick:()=>{a(),s()},children:[e.jsx(Q,{size:16})," Edit Teacher"]}),e.jsxs("button",{className:"btn-secondary",onClick:o,children:[e.jsx(z,{size:16})," Copy JSON"]}),e.jsxs("button",{className:"btn-secondary",onClick:r,children:[e.jsx(P,{size:16})," Download .txt"]})]}),e.jsx("h4",{children:"Raw Data"}),e.jsx("pre",{className:"raw-data-view",children:JSON.stringify(t,null,2)})]})})},Be=({isOpen:n,onClose:s,teacher:t,onTeacherUpdated:a})=>{const[o,r]=c.useState(""),[l,d]=c.useState(""),[p,j]=c.useState(""),[x,_]=c.useState(30),[f,v]=c.useState(!1),[C,h]=c.useState(""),{data:b}=L({queryKey:["all_institutions_simple"],queryFn:se,enabled:n});U.useEffect(()=>{var u,y;t&&(r(t.first_name||""),d(t.last_name||""),j(((u=t.institution)==null?void 0:u.id)||""),_(((y=t.student_limits[0])==null?void 0:y.max_students)||30))},[t]);const m=async u=>{u.preventDefault(),v(!0),h("");const{error:y}=await k.rpc("update_teacher_profile",{p_teacher_id:t.id,p_first_name:o,p_last_name:l,p_institution_id:p,p_max_students:x});y?h(y.message):(a(),s()),v(!1)};return e.jsx(I,{isOpen:n,onClose:s,title:`Editing: ${t==null?void 0:t.first_name}`,children:e.jsxs("form",{className:"auth-form",onSubmit:m,style:{padding:0},children:[C&&e.jsx("p",{className:"error-message",children:C}),e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"First Name"}),e.jsx("input",{type:"text",value:o,onChange:u=>r(u.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Last Name"}),e.jsx("input",{type:"text",value:l,onChange:u=>d(u.target.value),required:!0})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Institution"}),e.jsx("select",{value:p,onChange:u=>j(u.target.value),children:b==null?void 0:b.map(u=>e.jsx("option",{value:u.id,children:u.name},u.id))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Max Students"}),e.jsx("input",{type:"number",min:"1",value:isNaN(x)?"":x,onChange:u=>_(parseInt(u.target.value,10)),required:!0})]}),e.jsx("button",{type:"submit",className:"btn",disabled:f,style:{marginTop:"1rem"},children:f?"Saving...":"Save Changes"})]})})},Ke=({isOpen:n,onClose:s,invite:t})=>{if(!t)return null;const a=()=>{navigator.clipboard.writeText(JSON.stringify(t,null,2))},o=()=>{const r="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),l=document.createElement("a");l.setAttribute("href",r),l.setAttribute("download",`invite_${t.code}.txt`),document.body.appendChild(l),l.click(),l.remove()};return e.jsx(I,{isOpen:n,onClose:s,title:`Details for Invite: ${t.code}`,children:e.jsxs("div",{className:"details-modal-content",children:[e.jsxs("div",{className:"modal-actions-header",children:[e.jsxs("button",{className:"btn-secondary",onClick:a,children:[e.jsx(z,{size:16})," Copy JSON"]}),e.jsxs("button",{className:"btn-secondary",onClick:o,children:[e.jsx(P,{size:16})," Download .txt"]})]}),e.jsx("h4",{children:"Raw Invite Data"}),e.jsx("pre",{className:"raw-data-view",children:JSON.stringify(t,null,2)})]})})},ss=()=>{const n=he(),[s,t]=c.useState("teachers"),[a,o]=c.useState(!1),[r,l]=c.useState(!1),[d,p]=c.useState(!1),[j,x]=c.useState(!1),[_,f]=c.useState(!1),[v,C]=c.useState(!1),[h,b]=c.useState(null),[m,u]=c.useState(null),[y,w]=c.useState(!1),{data:M,isLoading:O,error:T}=L({queryKey:["all_teachers"],queryFn:$e}),{data:S,isLoading:g,error:q}=L({queryKey:["pending_teacher_invites"],queryFn:Re}),{data:E,isLoading:te,error:J}=L({queryKey:["used_teacher_invites"],queryFn:Ue}),$=()=>{n.invalidateQueries({queryKey:["all_teachers"]}),n.invalidateQueries({queryKey:["pending_teacher_invites"]})},ne=i=>{b(i),l(!0)},ae=i=>{b(i),p(!0)},ie=i=>{u(i),x(!0)},re=i=>{u(i),f(!0)},le=i=>{b(i),C(!0)},oe=async()=>{if(!h)return;w(!0);const{error:i}=await k.rpc("deactivate_teacher_code",{p_code_id:h.id});i?alert(`Error: ${i.message}`):($(),l(!1)),w(!1)},ce=[{label:"First Name",key:"first_name"},{label:"Last Name",key:"last_name"},{label:"Email",key:"email"},{label:"Invitation Code",key:"code"},{label:"Institution",key:"institution.name"},{label:"Student Limit",key:"max_students"}],de=S?S.map(i=>{var F;return{...i,institution:{name:((F=i.institution)==null?void 0:F.name)||"N/A"}}}):[];return e.jsxs("div",{children:[e.jsx(pe,{to:"/account/admin/teachers-institutions",className:"btn-secondary",style:{marginBottom:"2rem",display:"inline-block"},children:"â† Back to Institutions & Teachers"}),e.jsx(ze,{isOpen:a,onClose:()=>o(!1),onInviteSent:$}),h&&e.jsx(Pe,{isOpen:d,onClose:()=>p(!1),onInviteUpdated:$,invite:h}),m&&e.jsx(Je,{isOpen:j,onClose:()=>x(!1),teacher:m,onEditClick:()=>re(m)}),m&&e.jsx(Be,{isOpen:_,onClose:()=>f(!1),onTeacherUpdated:$,teacher:m}),h&&e.jsx(Ke,{isOpen:v,onClose:()=>C(!1),invite:h}),e.jsx(I,{isOpen:r,onClose:()=>l(!1),title:"Confirm Deactivation",children:h&&e.jsxs("div",{children:[e.jsxs("p",{children:["Are you sure you want to deactivate the invitation for ",e.jsxs("strong",{children:[h.first_name||"N/A"," ",h.last_name||"N/A"]})," (",h.email||"N/A",")?"]}),e.jsxs("p",{children:["The code ",e.jsx("strong",{children:h.code||"N/A"})," will no longer be usable."]}),e.jsxs("div",{className:"modal-actions",children:[e.jsx("button",{onClick:oe,className:"btn-danger",disabled:y,children:y?"Deactivating...":"Yes, Deactivate"}),e.jsx("button",{className:"btn-secondary",onClick:()=>l(!1),disabled:y,children:"Cancel"})]})]})}),e.jsxs("div",{className:"manage-header",children:[e.jsx("h1",{children:"Manage Teachers & Invites"}),e.jsxs("button",{className:"btn",onClick:()=>o(!0),children:[e.jsx(Ce,{size:20,style:{marginRight:"0.5rem"}})," Invite New Teacher"]})]}),e.jsxs("div",{className:"tab-container",children:[e.jsx("button",{className:`tab-button ${s==="teachers"?"active":""}`,onClick:()=>t("teachers"),children:"All Teachers"}),e.jsx("button",{className:`tab-button ${s==="pending"?"active":""}`,onClick:()=>t("pending"),children:"Pending Invites"}),e.jsx("button",{className:`tab-button ${s==="used"?"active":""}`,onClick:()=>t("used"),children:"Used Invites"})]}),e.jsxs("div",{className:"tab-content",children:[s==="teachers"&&e.jsxs("div",{children:[O&&e.jsx("p",{children:"Loading teachers..."}),T&&e.jsx("p",{className:"error-message",children:T.message}),M&&e.jsx("div",{className:"manage-table-container",children:e.jsxs("table",{className:"manage-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Name"}),e.jsx("th",{children:"Institution"}),e.jsx("th",{children:"Students"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:M.map(i=>{var F,B,K;return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsxs("strong",{children:[i.first_name," ",i.last_name]}),e.jsx("small",{children:i.email})]}),e.jsx("td",{children:((F=i.institution)==null?void 0:F.name)||"N/A"}),e.jsxs("td",{style:{textAlign:"center"},children:[((B=i.teacher_students[0])==null?void 0:B.count)??0," / ",((K=i.student_limits[0])==null?void 0:K.max_students)??"N/A"]}),e.jsx("td",{style:{textAlign:"center"},children:e.jsxs("button",{className:"btn-secondary",onClick:()=>ie(i),children:[e.jsx(V,{size:16})," Details"]})})]},i.id)})})]})})]}),s==="pending"&&e.jsxs("div",{children:[e.jsxs("div",{className:"tab-header",children:[e.jsx("h2",{children:"Pending Invites"}),S&&S.length>0&&e.jsxs(qe,{data:de,headers:ce,filename:"teacher_invites.csv",className:"btn-secondary",target:"_blank",children:[e.jsx(P,{size:16,style:{marginRight:"0.5rem"}}),"Export as CSV"]})]}),g&&e.jsx("p",{children:"Loading invites..."}),q&&e.jsx("p",{className:"error-message",children:q.message}),S&&S.length>0?e.jsx("div",{className:"manage-table-container",children:e.jsxs("table",{className:"manage-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Invited Name"}),e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Actions"})]})}),e.jsx("tbody",{children:S.map(i=>e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsxs("strong",{children:[i.first_name," ",i.last_name]}),e.jsx("small",{children:i.email})]}),e.jsx("td",{style:{fontFamily:"var(--font-mono)"},children:i.code}),e.jsx("td",{className:"actions-cell",children:e.jsx(Se,{actions:[{label:"Details",icon:e.jsx(V,{size:16}),onClick:()=>le(i)},{label:"Copy Code",icon:e.jsx(z,{size:16}),onClick:()=>navigator.clipboard.writeText(i.code)},{label:"Edit Invite",icon:e.jsx(Q,{size:16}),onClick:()=>ae(i)},{label:"Deactivate",icon:e.jsx(je,{size:16}),onClick:()=>ne(i),className:"danger"}]})})]},i.id))})]})}):e.jsx("p",{children:"No pending invites found."})]}),s==="used"&&e.jsxs("div",{children:[te&&e.jsx("p",{children:"Loading invites..."}),J&&e.jsx("p",{className:"error-message",children:J.message}),E&&e.jsx("div",{className:"manage-table-container",children:e.jsxs("table",{className:"manage-table",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Code"}),e.jsx("th",{children:"Email Invited"}),e.jsx("th",{children:"Claimed By"}),e.jsx("th",{children:"Claimed At"})]})}),e.jsx("tbody",{children:E.map(i=>e.jsxs("tr",{children:[e.jsx("td",{style:{fontFamily:"var(--font-mono)"},children:i.code}),e.jsx("td",{children:i.email}),e.jsx("td",{children:i.claimed_by?`${i.claimed_by.first_name} ${i.claimed_by.last_name}`:"N/A"}),e.jsx("td",{children:new Date(i.claimed_at).toLocaleString()})]},i.id))})]})})]})]})]})};export{ss as default};
