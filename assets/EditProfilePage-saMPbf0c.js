import{a as b,u as v,r as a,j as e,L as y,s as P}from"./index-Do9N5Bdr.js";import{P as S,i as C}from"./index-DBV7NSSN.js";/* empty css              *//* empty css                 */import"./index-KxUSDxB7.js";const w=()=>{const{user:o,profile:s,fetchProfile:x,loading:N}=b(),l=v(),[m,n]=a.useState(!1),[c,i]=a.useState(""),[d,u]=a.useState(""),[h,p]=a.useState(""),[r,f]=a.useState("");a.useEffect(()=>{s&&(u(s.first_name||""),p(s.last_name||""),f(s.phone||""))},[s]);const j=async t=>{if(t.preventDefault(),i(""),r&&!C(r)){i("Please enter a valid phone number.");return}n(!0);const{error:g}=await P.from("profiles").update({first_name:d,last_name:h,phone:r,updated_at:new Date}).eq("id",o.id);g?(i(g.message),n(!1)):(await x(o.id),n(!1),l("/account/profile"))};return N?e.jsx("div",{children:"Loading..."}):e.jsxs("div",{children:[e.jsx(y,{to:"/account/settings",className:"btn-secondary",style:{marginBottom:"2rem",display:"inline-block"},children:"â† Back to Settings"}),e.jsx("h1",{children:"Edit Profile"}),e.jsx("div",{className:"auth-form-container",style:{margin:"2rem 0"},children:e.jsxs("form",{className:"auth-form",onSubmit:j,children:[c&&e.jsx("p",{className:"error-message",children:c}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"firstName",children:"First Name"}),e.jsx("input",{id:"firstName",type:"text",value:d,onChange:t=>u(t.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"lastName",children:"Last Name"}),e.jsx("input",{id:"lastName",type:"text",value:h,onChange:t=>p(t.target.value)})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"phone",children:"Phone Number"}),e.jsx(S,{id:"phone",international:!0,countryCallingCodeEditable:!1,value:r,onChange:f})]}),e.jsxs("div",{style:{display:"flex",gap:"1rem",marginTop:"2rem"},children:[e.jsx("button",{type:"submit",className:"btn",disabled:m,children:m?"Saving...":"Save Changes"}),e.jsx("button",{type:"button",className:"btn-secondary",onClick:()=>l("/account/settings"),children:"Cancel"})]})]})})]})};export{w as default};
