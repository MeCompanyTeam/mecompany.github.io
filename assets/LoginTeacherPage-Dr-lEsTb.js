import{r as s,u as E,j as e,L,s as l}from"./index-Do9N5Bdr.js";import{M as S}from"./Modal-C0JTwID5.js";/* empty css              */import{E as C}from"./eye-off-CzSuKnRE.js";import{E as P}from"./eye-Cn1LezQ_.js";const I=()=>{const[i,j]=s.useState(""),[c,w]=s.useState(""),[r,b]=s.useState(!1),[d,a]=s.useState(!1),[u,m]=s.useState(""),[v,o]=s.useState(!1),[n,h]=s.useState({title:"",message:"",button:null}),p=E(),N=async t=>{t.preventDefault(),m(""),a(!0);const{data:{user:g}={},error:f}=await l.auth.signInWithPassword({email:i,password:c});if(f){m(f.message),a(!1);return}if(g){const{data:x,error:y}=await l.from("profiles").select("role").eq("id",g.id).single();y||!x?(h({title:"Login Error",message:"Could not verify user role. Please try again."}),o(!0),await l.auth.signOut(),a(!1)):x.role!=="teacher"?(h({title:"Incorrect Account Type",message:"This is not a teacher account. Please use the personal login page.",button:e.jsx("button",{className:"lt-btn",onClick:()=>p("/login/personal"),children:"Go to Personal Login"})}),o(!0),await l.auth.signOut(),a(!1)):(p("/teacher-panel"),a(!1))}else a(!1)};return e.jsxs("div",{className:"lt-auth-page",children:[e.jsxs(S,{isOpen:v,onClose:()=>o(!1),className:"lt-modal",children:[e.jsx("h2",{children:n.title}),e.jsx("p",{children:n.message}),e.jsxs("div",{style:{marginTop:"1.5rem",display:"flex",gap:"1rem"},children:[n.button,e.jsx("button",{className:"lt-btn-secondary",onClick:()=>o(!1),children:"OK"})]})]}),e.jsx("div",{className:"lt-auth-form-container",children:e.jsxs("form",{className:"lt-auth-form",onSubmit:N,children:[e.jsx("h1",{children:"Teacher Login"}),e.jsx("p",{className:"lt-auth-form-description",children:"Log in to your Teacher account."}),u&&e.jsx("p",{className:"lt-error-message",children:u}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",value:i,onChange:t=>j(t.target.value),required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"lt-password-input-wrapper",children:[e.jsx("input",{type:r?"text":"password",id:"password",value:c,onChange:t=>w(t.target.value),required:!0}),e.jsx("button",{type:"button",onClick:()=>b(!r),className:"lt-password-toggle-btn","aria-label":r?"Hide password":"Show password",children:r?e.jsx(C,{size:20}):e.jsx(P,{size:20})})]})]}),e.jsx("button",{type:"submit",className:"lt-btn",disabled:d,children:d?"Logging in...":"Login"}),e.jsxs("p",{className:"lt-auth-switch",children:["Don't have an account? ",e.jsx(L,{to:"/register",children:"Register"})]})]})})]})};export{I as default};
